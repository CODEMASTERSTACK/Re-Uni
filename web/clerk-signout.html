<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Signing out...</title>
  <style>
    body { font-family: system-ui, sans-serif; background: #111; color: #eee; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
    .box { text-align: center; }
    .spinner { width: 40px; height: 40px; border: 3px solid #333; border-top-color: #f44; border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto 1rem; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .err { color: #f66; margin-top: 1rem; }
    a { color: #6af; }
  </style>
</head>
<body>
  <div class="box">
    <div class="spinner"></div>
    <p>Signing out...</p>
    <p id="err" class="err" style="display:none;"></p>
    <p id="link" style="display:none;"><a id="appLink" href="/">Continue to app</a></p>
  </div>
  <script
    id="clerk-script"
    crossorigin="anonymous"
    data-clerk-publishable-key="pk_test_d29ya2luZy10dXJ0bGUtNzQuY2xlcmsuYWNjb3VudHMuZGV2JA"
    src="https://working-turtle-74.clerk.accounts.dev/npm/@clerk/clerk-js@5/dist/clerk.browser.js"
    type="text/javascript"
  ></script>
  <script>
    (function() {
      var appOrigin = location.origin;
      var appRoot = appOrigin + '/';
      var redirectParam = (location.search && location.search.indexOf('redirect=') !== -1)
        ? decodeURIComponent((location.search.split('redirect=')[1] || '').split('&')[0]) || appRoot
        : appRoot;
      function goToApp() {
        location.replace(redirectParam);
      }
      function showErr(msg) {
        var el = document.getElementById('err');
        var linkEl = document.getElementById('link');
        if (el) { el.textContent = msg || 'Sign out failed.'; el.style.display = 'block'; }
        if (linkEl) { linkEl.style.display = 'block'; }
        var a = document.getElementById('appLink');
        if (a) a.href = appRoot;
      }
      var publishableKey = 'pk_test_d29ya2luZy10dXJ0bGUtNzQuY2xlcmsuYWNjb3VudHMuZGV2JA';
      function run() {
        if (typeof window.Clerk === 'undefined') {
          goToApp();
          return;
        }
        var clerk = window.Clerk;
        var isConstructor = typeof clerk === 'function';
        var promise;
        if (isConstructor) {
          try {
            var instance = new clerk(publishableKey);
            promise = instance.load();
            clerk = instance;
          } catch (e) {
            goToApp();
            return;
          }
        } else {
          promise = clerk.load ? clerk.load() : Promise.resolve();
        }
        Promise.resolve(promise).then(function() {
          var signOut = clerk.signOut;
          if (typeof signOut !== 'function') {
            goToApp();
            return;
          }
          return signOut.call(clerk, { redirectUrl: redirectParam });
        }).then(function() {
          goToApp();
        }).catch(function() {
          goToApp();
        });
      }
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', run);
      } else {
        run();
      }
    })();
  </script>
</body>
</html>
